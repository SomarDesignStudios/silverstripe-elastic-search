(function(e){function t(t){for(var r,i,o=t[0],l=t[1],c=t[2],d=0,h=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&h.push(s[i][0]),s[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(h.length)h.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],r=!0,o=1;o<a.length;o++){var l=a[o];0!==s[l]&&(r=!1)}r&&(n.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},s={app:0},n=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0448":function(e,t,a){},"17c5":function(e,t,a){"use strict";var r=a("0448"),s=a.n(r);s.a},"1bcc":function(e,t,a){"use strict";var r=a("49b8"),s=a.n(r);s.a},"49b8":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"search-app"}},[a("SearchHeader",{attrs:{resultsCount:e.results.length,loadingResults:e.isLoading},on:{search:e.onSearch}}),e.isLoading?a("div",{staticClass:"search__loader"},[a("span",{staticClass:"sr-only"},[e._v("Loading...")])]):a("SearchResults",{attrs:{results:e.results,errorMessage:e.error}})],1)},n=[],i=(a("99af"),a("d3b7"),a("ac1f"),a("5319"),a("4160"),a("a15b"),a("d81d"),a("b64b"),a("159b"),{labels:{filtersHint:"Refine your serach results below by selecting popular filters and/or ordering them by date."},filters:{type:{placeholder:"Type of content",options:[{name:"News",value:"news"},{name:"Event",value:"event"},{name:"Content",value:"content"}]},date:{placeholder:"Type of content",options:[{name:"Most recent first",value:"desc"},{name:"Oldest first",value:"asc"},{name:"Select dates",value:"range"}]}}}),o=document.getElementById("search-config"),l=o?JSON.parse(o.innerHTML):i,c=function(e,t){var a;return function(){var r=arguments,s=this,n=function(){return e.apply(s,r)};clearTimeout(a),a=setTimeout(n,t)}},u=function(e){var t=[];return Object.keys(e).forEach((function(a){Array.isArray(e[a])?e[a].length&&t.push("".concat(a,"[]=").concat(e[a].map(encodeURIComponent).join("&".concat(a,"[]=")))):e[a]&&"null"!=e[a]&&t.push("".concat(a,"=").concat(encodeURIComponent(e[a])))})),"?".concat(t.join("&"))},d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search__header"},[e.searchedKeyword?a("h2",[e._v(e._s(e.resultsCount)+" results found for ‘"+e._s(e.searchedKeyword)+"’")]):a("h2",[e._v(e._s(e.config.labels.title))]),a("div",{staticClass:"search__keyword"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.keyword,expression:"keyword"}],staticClass:"search__input",attrs:{type:"search"},domProps:{value:e.keyword},on:{input:[function(t){t.target.composing||(e.keyword=t.target.value)},e.onKeywordChange]}}),a("i",{staticClass:"material-icons text-primary"},[e._v("search")])]),a("div",{staticClass:"search__filters"},[a("h3",{staticClass:"search__hint"},[e._v(e._s(e.config.labels.filtersHint))]),a("div",{staticClass:"row"},[e._l(e.config.filters,(function(t){return a("div",{key:t.name,staticClass:"col-md-6"},[a("multiselect",{staticClass:"multiselect--multiple",attrs:{"track-by":"value",label:"name",placeholder:t.placeholder,options:t.options,multiple:!0,searchable:!1},on:{input:e.onFilterChange},scopedSlots:e._u([{key:"tag",fn:function(t){var r=t.option,s=t.remove;return[a("span",{staticClass:"multiselect__tag"},[e._v(" "+e._s(r.name)+" "),a("button",{staticClass:"multiselect__tag-remove",on:{click:function(e){return s(r)}}},[a("i",{staticClass:"material-icons"},[e._v("close")])])])]}}],null,!0),model:{value:e.filters[t.name],callback:function(a){e.$set(e.filters,t.name,a)},expression:"filters[filterConfig.name]"}})],1)})),e.config.date?a("div",{staticClass:"col-md-6"},[a("multiselect",{attrs:{"track-by":"value",label:"name",placeholder:"By date",options:e.config.date.options,searchable:!1},on:{input:e.onDateFilterChange},model:{value:e.dateFilter,callback:function(t){e.dateFilter=t},expression:"dateFilter"}}),e.dateFilter&&"range"==e.dateFilter.value?a("div",{staticClass:"search__dates row"},[a("div",{staticClass:"col-sm-4"},[a("label",{staticClass:"search__date search__date-from"},[e._v(" Date From "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.dateFrom,expression:"dateFrom"}],attrs:{type:"date"},domProps:{value:e.dateFrom},on:{input:[function(t){t.target.composing||(e.dateFrom=t.target.value)},e.search]}})])]),a("div",{staticClass:"col-sm-4"},[a("label",{staticClass:"search__date search__date-to"},[e._v(" Date To "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.dateTo,expression:"dateTo"}],attrs:{type:"date"},domProps:{value:e.dateTo},on:{input:[function(t){t.target.composing||(e.dateTo=t.target.value)},e.search]}})])])]):e._e()],1):e._e()],2)])])},h=[],f=(a("4de4"),a("7db0"),a("caad"),a("b0c0"),a("a9e3"),a("2532"),a("3ca3"),a("841c"),a("ddb0"),a("2b3d"),a("5530")),p=a("8e5f"),m=a.n(p),_={props:{resultsCount:Number,loadingResults:Boolean},components:{Multiselect:m.a},data:function(){return{keyword:"",searchedKeyword:"",filters:{},dateFilter:null,dateFrom:null,dateTo:null,config:l}},computed:{searchParams:function(){var e=this,t={};return this.config.filters.forEach((function(a){e.filters[a.name]&&(t[a.name]=e.filters[a.name].map((function(e){return e.value})))})),Object(f["a"])({q:this.keyword,sort:this.dateFilter&&["asc","desc"].includes(this.dateFilter.value)?this.dateFilter.value:"",dateFrom:this.dateFrom,dateTo:this.dateTo},t)},url:function(){return window.href}},watch:{loadingResults:function(e){e||(this.searchedKeyword=this.keyword)}},created:function(){this.initFilters(),this.search();var e=this;window.onpopstate=function(){e.initFilters(),e.search(!1)}},methods:{initFilters:function(){var e=window.location.search.substring(1),t=new URLSearchParams(e);this.searchedKeyword=this.keyword=t.get("q");var a={};this.config.filters.forEach((function(e){a[e.name]=e.options.filter((function(a){return t.getAll("".concat(e.name,"[]")).includes(a.value)}))})),this.filters=a,this.config.date&&(this.dateFilter=this.config.date.options.find((function(e){return t.get("sort")==e.value})),(t.get("dateFrom")||t.get("dateTo"))&&(this.dateFilter=this.config.date.options.find((function(e){return"range"==e.value})),this.dateFrom=t.get("dateFrom"),this.dateTo=t.get("dateTo")))},onKeywordChange:function(){this.debouncedSearch()},onFilterChange:function(){this.search()},onDateFilterChange:function(){this.dateFrom=this.dateTo=null,this.dateFilter&&"range"!=this.dateFilter.value&&this.search()},debouncedSearch:c((function(){this.search()}),500),search:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.keyword){if(e){var t=window.location.pathname.replace(/\/$/,"");window.history.pushState({},"","".concat(t,"/").concat(u(this.searchParams)))}this.$emit("search",this.searchParams)}}}},v=_,g=(a("17c5"),a("2877")),b=Object(g["a"])(v,d,h,!1,null,"649bd82c",null),y=b.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.pageResults.length?a("div",{staticClass:"search-results"},[a("ul",{staticClass:"search-results__list"},e._l(e.pageResults,(function(t){return a("li",{key:t.id,staticClass:"search-results__item"},[t.thumbnailURL?a("a",{staticClass:"search-results__thumbnail d-none d-sm-block",attrs:{href:t.url}},[a("img",{attrs:{src:t.thumbnailURL,alt:t.title}})]):e._e(),a("div",{staticClass:"search-results__details"},[a("a",{attrs:{href:t.url}},[a("h2",{class:["search-results__title","type-"+t.type]},[e._v(e._s(t.title))])]),a("p",{staticClass:"search-results__summary"},[e._v(e._s(t.summary))]),a("div",{staticClass:"d-flex"},[t.thumbnailURL?a("a",{staticClass:"search-results__thumbnail d-sm-none",attrs:{href:t.url}},[a("img",{attrs:{src:t.thumbnailURL,alt:t.title}})]):e._e(),a("div",{staticClass:"search-results__meta"},[t.fileURL?a("a",{staticClass:"search-results__url",attrs:{href:t.fileURL,target:"_blank"}},[e._v("Download now")]):a("a",{staticClass:"search-results__url",attrs:{href:t.url}},[e._v(e._s(e._f("addHost")(t.url)))]),a("span",{staticClass:"search-results__date"},[t.dateString?[e._v(e._s(t.dateString))]:[e._v("Updated "+e._s(e._f("dateFormat")(t.date)))]],2)])])])])})),0),a("nav",{attrs:{"aria-label":"Search results pages"}},[a("ul",{staticClass:"pagination"},[e.currentPage>1?a("li",{staticClass:"pagination__prev"},[a("a",{staticClass:"btn btn-round btn-outline-primary btn-arrow-back",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.currentPage--}}},[e._v("Previous ")])]):e._e(),e._l(e.pageCount,(function(t){return a("li",{key:t,staticClass:"pagination__page"},[a("a",{staticClass:"btn btn-circle btn-outline-primary",class:{active:e.currentPage==t},attrs:{href:"#"},on:{click:function(a){a.preventDefault(),e.currentPage=t}}},[e._v(e._s(t)+" ")])])})),e.currentPage<e.pageCount?a("li",{staticClass:"pagination__next"},[a("a",{staticClass:"btn btn-round btn-outline-primary btn-arrow",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.currentPage++}}},[e._v("Next ")])]):e._e()],2)])]):e.errorMessage?a("h1",{staticClass:"search-results__message search-results__message--error"},[e._v(e._s(e.errorMessage))]):a("h1",{staticClass:"search-results__message"},[e._v("No results found")])},w=[],F=(a("fb6a"),{props:{errorMessage:String,results:Array,resultsPerPage:{type:Number,default:10}},data:function(){return{currentPage:1}},computed:{pageResults:function(){var e=(this.currentPage-1)*this.resultsPerPage;return this.results.slice(e,e+this.resultsPerPage)},pageCount:function(){return Math.ceil(this.results.length/this.resultsPerPage)}},filters:{addHost:function(e){return window.location.host+e},dateFormat:function(e){var t=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],a=new Date(e),r=(a.getDate()<10?"0":"")+a.getDate();return"".concat(r," ").concat(t[a.getMonth()]," ").concat(a.getFullYear())}}}),P=F,k=(a("1bcc"),Object(g["a"])(P,C,w,!1,null,"cf2dd9de",null)),S=k.exports,T={name:"Search",components:{SearchHeader:y,SearchResults:S},data:function(){return{isLoading:!1,error:"",results:[]}},created:function(){},methods:{onSearch:function(e){var t=this;this.isLoading=!0,this.error="";var a=window.location.pathname.replace(/\/$/,""),r="".concat(a,"/search").concat(u(e));fetch(r,{headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){t.results=e.results?e.results:[]})).catch((function(){t.error="An unexpected error ocurred, please refresh the page and try again",t.results=[]})).finally((function(){t.isLoading=!1}))}}},O=T,R=Object(g["a"])(O,s,n,!1,null,null,null),x=R.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(x)}}).$mount("#search-app")}});
//# sourceMappingURL=app.js.map