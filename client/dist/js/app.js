(function(e){function t(t){for(var r,o,i=t[0],l=t[1],c=t[2],d=0,h=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&h.push(s[o][0]),s[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(h.length)h.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],r=!0,i=1;i<a.length;i++){var l=a[i];0!==s[l]&&(r=!1)}r&&(n.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},s={app:0},n=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0ed7":function(e,t,a){"use strict";var r=a("86d3"),s=a.n(r);s.a},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"search-app"}},[a("SearchHeader",{attrs:{resultsCount:e.results.length,loadingResults:e.isLoading},on:{search:e.onSearch}}),e.isLoading?a("div",{staticClass:"search__loader"},[a("span",{staticClass:"sr-only"},[e._v("Loading...")])]):a("SearchResults",{attrs:{results:e.results,errorMessage:e.error}})],1)},n=[],o=(a("99af"),a("d3b7"),a("ac1f"),a("5319"),a("4160"),a("a15b"),a("d81d"),a("b64b"),a("159b"),a("5530")),i={labels:{filtersHint:"Refine your serach results below by selecting popular filters and/or ordering them by date."},filters:{type:{placeholder:"Type of content",options:[{name:"News",value:"news"},{name:"Event",value:"event"},{name:"Content",value:"content"}]},date:{placeholder:"Type of content",options:[{name:"Most recent first",value:"desc"},{name:"Oldest first",value:"asc"},{name:"Select dates",value:"range"}]}}},l=document.getElementById("search-config"),c=l?JSON.parse(l.innerHTML):i,u=function(e,t){var a;return function(){var r=arguments,s=this,n=function(){return e.apply(s,r)};clearTimeout(a),a=setTimeout(n,t)}},d=function(e){var t=Object(o["a"])({},e);Object.keys(t).forEach((function(e){t[e]=Array.isArray(t[e])?t[e].map(encodeURIComponent):encodeURIComponent(t[e])}));var a="?q=".concat(t.keyword);return t.type&&t.type.length&&(a+="&type[]=".concat(t.type.join("&type[]="))),t.sort&&(a+="&sort=".concat(t.sort)),t.dateFrom&&"null"!=t.dateFrom&&(a+="&dateFrom=".concat(t.dateFrom)),t.dateTo&&"null"!=t.dateTo&&(a+="&dateTo=".concat(t.dateTo)),a},h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search__header"},[e.searchedKeyword?a("h2",[e._v(e._s(e.resultsCount)+" results found for ‘"+e._s(e.searchedKeyword)+"’")]):a("h2",[e._v("Start typing to search the content")]),a("div",{staticClass:"search__keyword"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.keyword,expression:"keyword"}],staticClass:"search__input",attrs:{type:"search"},domProps:{value:e.keyword},on:{input:[function(t){t.target.composing||(e.keyword=t.target.value)},e.onKeywordChange]}}),a("i",{staticClass:"material-icons text-primary"},[e._v("search")])]),a("div",{staticClass:"search__filters"},[a("h3",{staticClass:"search__hint"},[e._v(e._s(e.config.labels.filtersHint))]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("multiselect",{staticClass:"multiselect--multiple",attrs:{"track-by":"value",label:"name",placeholder:e.config.filters.type.placeholder,options:e.config.filters.type.options,multiple:!0,searchable:!1},on:{input:e.onTypeFilterChange},scopedSlots:e._u([{key:"tag",fn:function(t){var r=t.option,s=t.remove;return[a("span",{staticClass:"multiselect__tag"},[e._v(" "+e._s(r.name)+" "),a("button",{staticClass:"multiselect__tag-remove",on:{click:function(e){return s(r)}}},[a("i",{staticClass:"material-icons"},[e._v("close")])])])]}}]),model:{value:e.typeFilter,callback:function(t){e.typeFilter=t},expression:"typeFilter"}})],1),a("div",{staticClass:"col-md-6"},[a("multiselect",{attrs:{"track-by":"value",label:"name",placeholder:"By date",options:e.config.filters.date.options,searchable:!1},on:{input:e.onDateFilterChange},model:{value:e.dateFilter,callback:function(t){e.dateFilter=t},expression:"dateFilter"}}),e.dateFilter&&"range"==e.dateFilter.value?a("div",{staticClass:"search__dates row"},[a("div",{staticClass:"col-sm-4"},[a("label",{staticClass:"search__date search__date-from"},[e._v(" Date From "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.dateFrom,expression:"dateFrom"}],attrs:{type:"date"},domProps:{value:e.dateFrom},on:{input:[function(t){t.target.composing||(e.dateFrom=t.target.value)},e.search]}})])]),a("div",{staticClass:"col-sm-4"},[a("label",{staticClass:"search__date search__date-to"},[e._v(" Date To "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.dateTo,expression:"dateTo"}],attrs:{type:"date"},domProps:{value:e.dateTo},on:{input:[function(t){t.target.composing||(e.dateTo=t.target.value)},e.search]}})])])]):e._e()],1)])])])},p=[],f=(a("4de4"),a("7db0"),a("caad"),a("a9e3"),a("2532"),a("3ca3"),a("841c"),a("ddb0"),a("2b3d"),a("8e5f")),v=a.n(f),m={props:{resultsCount:Number,loadingResults:Boolean},components:{Multiselect:v.a},data:function(){return{keyword:"",searchedKeyword:"",typeFilter:[],dateFilter:null,dateFrom:null,dateTo:null,config:c}},computed:{searchParams:function(){return{keyword:this.keyword,type:this.typeFilter.map((function(e){return e.value})),sort:this.dateFilter&&["asc","desc"].includes(this.dateFilter.value)?this.dateFilter.value:"",dateFrom:this.dateFrom,dateTo:this.dateTo}},url:function(){return window.href}},watch:{loadingResults:function(e){e||(this.searchedKeyword=this.keyword)}},created:function(){this.initFilters(),this.search();var e=this;window.onpopstate=function(){e.initFilters(),e.search(!1)}},methods:{initFilters:function(){var e=window.location.search.substring(1),t=new URLSearchParams(e);this.searchedKeyword=this.keyword=t.get("q");var a=this.config.filters;this.typeFilter=a.type.options.filter((function(e){return t.getAll("type[]").includes(e.value)})),this.dateFilter=a.date.options.find((function(e){return t.get("sort")==e.value})),(t.get("dateFrom")||t.get("dateTo"))&&(this.dateFilter=a.date.options.find((function(e){return"range"==e.value})),this.dateFrom=t.get("dateFrom"),this.dateTo=t.get("dateTo"))},onKeywordChange:function(){this.debouncedSearch()},onTypeFilterChange:function(){this.search()},onDateFilterChange:function(){this.dateFrom=this.dateTo=null,this.dateFilter&&"range"!=this.dateFilter.value&&this.search()},debouncedSearch:u((function(){this.search()}),500),search:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.keyword){if(e){var t=window.location.pathname.replace(/\/$/,"");window.history.pushState({},"","".concat(t,"/").concat(d(this.searchParams)))}this.$emit("search",this.searchParams)}}}},g=m,_=(a("711d"),a("2877")),y=Object(_["a"])(g,h,p,!1,null,"1516928f",null),b=y.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.pageResults.length?a("div",{staticClass:"search-results"},[a("ul",{staticClass:"search-results__list"},e._l(e.pageResults,(function(t){return a("li",{key:t.id,staticClass:"search-results__item"},[a("a",{attrs:{href:t.url}},[a("h2",{class:["search-results__title","type-"+t.type]},[e._v(e._s(t.title))])]),a("dir",[e._v(e._s(t.class))]),a("p",{staticClass:"search-results__summary"},[e._v(e._s(t.summary))]),a("a",{staticClass:"search-results__url",attrs:{href:t.url}},[e._v(e._s(e._f("addHost")(t.url)))]),a("div",{staticClass:"search-results__meta"},[a("span",{staticClass:"search-results__updated"},[a("i",{staticClass:"material-icons"},[e._v("alarm")]),e._v(" Updated "+e._s(e._f("dateFormat")(t.lastEdited))+" ")])])],1)})),0),a("nav",{attrs:{"aria-label":"Search results pages"}},[a("ul",{staticClass:"pagination"},[e.currentPage>1?a("li",{staticClass:"pagination__prev"},[a("a",{staticClass:"btn btn-round btn-outline-primary btn-arrow-back",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.currentPage--}}},[e._v("Previous ")])]):e._e(),e._l(e.pageCount,(function(t){return a("li",{key:t,staticClass:"pagination__page"},[a("a",{staticClass:"btn btn-circle btn-outline-primary",class:{active:e.currentPage==t},attrs:{href:"#"},on:{click:function(a){a.preventDefault(),e.currentPage=t}}},[e._v(e._s(t)+" ")])])})),e.currentPage<e.pageCount?a("li",{staticClass:"pagination__next"},[a("a",{staticClass:"btn btn-round btn-outline-primary btn-arrow",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.currentPage++}}},[e._v("Next ")])]):e._e()],2)])]):e.errorMessage?a("h1",{staticClass:"search-results__message search-results__message--error"},[e._v(e._s(e.errorMessage))]):a("h1",{staticClass:"search-results__message"},[e._v("No results found")])},C=[],F=(a("fb6a"),{props:{errorMessage:String,results:Array,resultsPerPage:{type:Number,default:10}},data:function(){return{currentPage:1}},computed:{pageResults:function(){var e=(this.currentPage-1)*this.resultsPerPage;return this.results.slice(e,e+this.resultsPerPage)},pageCount:function(){return Math.ceil(this.results.length/this.resultsPerPage)}},filters:{addHost:function(e){return window.location.host+e},dateFormat:function(e){var t=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],a=new Date(e),r=(a.getDate()<10?"0":"")+a.getDate();return"".concat(r," ").concat(t[a.getMonth()]," ").concat(a.getFullYear())}}}),P=F,k=(a("0ed7"),Object(_["a"])(P,w,C,!1,null,"3df0ce1d",null)),T=k.exports,S={name:"Search",components:{SearchHeader:b,SearchResults:T},data:function(){return{isLoading:!1,error:"",results:[]}},created:function(){},methods:{onSearch:function(e){var t=this;this.isLoading=!0,this.error="";var a=window.location.pathname.replace(/\/$/,""),r="".concat(a,"/search").concat(d(e));fetch(r,{headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){t.results=e.results?e.results:[]})).catch((function(){t.error="An unexpected error ocurred, please refresh the page and try again",t.results=[]})).finally((function(){t.isLoading=!1}))}}},O=S,x=Object(_["a"])(O,s,n,!1,null,null,null),j=x.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(j)}}).$mount("#search-app")},"711d":function(e,t,a){"use strict";var r=a("b7fe"),s=a.n(r);s.a},"86d3":function(e,t,a){},b7fe:function(e,t,a){}});
//# sourceMappingURL=app.js.map