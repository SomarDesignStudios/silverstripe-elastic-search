(function(e){function t(t){for(var a,o,i=t[0],l=t[1],c=t[2],d=0,f=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&f.push(n[o][0]),n[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(f.length)f.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,i=1;i<r.length;i++){var l=r[i];0!==n[l]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},n={app:0},s=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},3407:function(e,t,r){"use strict";var a=r("86bd"),n=r.n(a);n.a},"497d":function(e,t,r){"use strict";var a=r("64c4"),n=r.n(a);n.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"search-app"}},[r("SearchHeader",{attrs:{resultsCount:e.resultsMeta.count,loadingResults:e.isLoading},on:{search:e.onSearch}}),e.isLoading?r("div",{staticClass:"search__loader"},[r("span",{staticClass:"sr-only"},[e._v("Loading...")])]):r("SearchResults",{attrs:{results:e.results,errorMessage:e.error}})],1)},s=[],o=(r("99af"),r("d3b7"),r("ac1f"),r("5319"),r("4160"),r("a15b"),r("d81d"),r("b64b"),r("159b"),{labels:{filtersHint:"Refine your serach results below by selecting popular filters and/or ordering them by date."},filters:{type:{placeholder:"Type of content",options:[{name:"News",value:"news"},{name:"Event",value:"event"},{name:"Content",value:"content"}]},date:{placeholder:"Type of content",options:[{name:"Most recent first",value:"desc"},{name:"Oldest first",value:"asc"},{name:"Select dates",value:"range"}]}}}),i=document.getElementById("search-config"),l=i?JSON.parse(i.innerHTML):o,c=function(e,t){var r;return function(){var a=arguments,n=this,s=function(){return e.apply(n,a)};clearTimeout(r),r=setTimeout(s,t)}},u=function(e){var t=[];return Object.keys(e).forEach((function(r){Array.isArray(e[r])?e[r].length&&t.push("".concat(r,"[]=").concat(e[r].map(encodeURIComponent).join("&".concat(r,"[]=")))):e[r]&&"null"!=e[r]&&t.push("".concat(r,"=").concat(encodeURIComponent(e[r])))})),t.length?"?".concat(t.join("&")):""},d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search__header"},[e.searchedKeyword&&!e.loadingResults?r("h2",[e._v(e._s(e.resultsCount)+" results found for ‘"+e._s(e.searchedKeyword)+"’")]):e.keyword?r("h2",[e._v("Searching for ‘"+e._s(e.keyword)+"’ ...")]):r("h2",[e._v(e._s(e.config.labels.title))]),r("div",{staticClass:"search__keyword"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.keyword,expression:"keyword"}],staticClass:"search__input",attrs:{type:"search",placeholder:e.searchPlaceholder},domProps:{value:e.keyword},on:{input:[function(t){t.target.composing||(e.keyword=t.target.value)},e.onKeywordChange]}}),r("i",{staticClass:"material-icons text-primary"},[e._v("search")])]),e.config.secondarySearch?r("a",{staticClass:"search__secondary-link btn btn-outline-primary btn-round",attrs:{href:e.secondarySearchURL}},[e._v(e._s(e.config.secondarySearch.title))]):e._e(),r("div",{staticClass:"search__filters"},[r("h3",{staticClass:"search__hint"},[e._v(e._s(e.config.labels.filtersHint))]),r("div",{staticClass:"row"},[e._l(e.config.filters,(function(t,a){return r("div",{key:t.name,staticClass:"col-md-6"},[r("multiselect",{key:a,ref:"filterSelect",refInFor:!0,staticClass:"multiselect--multiple",attrs:{"track-by":"value",label:"name",placeholder:t.placeholder,options:t.options,multiple:!0,searchable:!1},on:{input:e.onFilterChange,close:e.onCloseFilterSelect,open:function(t){return e.addMultiSelectOverlay(e.$refs.filterSelect[a])}},nativeOn:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.keyTabDown(t,e.$refs.filterSelect[a])},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.keyArrowUp(e.$refs.filterSelect[a])},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.keyArrowDown(e.$refs.filterSelect[a])}]},scopedSlots:e._u([{key:"tag",fn:function(t){var a=t.option,n=t.remove;return[r("span",{staticClass:"multiselect__tag"},[e._v(" "+e._s(a.name)+" "),r("button",{staticClass:"multiselect__tag-remove",on:{click:function(e){return n(a)}}},[r("i",{staticClass:"material-icons"},[e._v("close")])])])]}}],null,!0),model:{value:e.filters[t.name],callback:function(r){e.$set(e.filters,t.name,r)},expression:"filters[filterConfig.name]"}})],1)})),e.config.date?r("div",{staticClass:"col-md-6"},[r("multiselect",{ref:"dateSelect",attrs:{"track-by":"value",label:"name",placeholder:"By date",options:e.config.date.options,searchable:!1},on:{input:e.onDateFilterChange,close:e.onCloseDateSelect,open:function(t){return e.addMultiSelectOverlay(e.$refs.dateSelect)}},nativeOn:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.keyTabDown(t,e.$refs.dateSelect)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.keyArrowUp(e.$refs.dateSelect)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.keyArrowDown(e.$refs.dateSelect)}]},model:{value:e.dateFilter,callback:function(t){e.dateFilter=t},expression:"dateFilter"}}),e.dateFilter&&"range"==e.dateFilter.value?r("div",{staticClass:"search__dates row"},[r("div",{staticClass:"col-sm-4"},[r("label",{staticClass:"search__date search__date-from"},[e._v(" Date From "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.dateFrom,expression:"dateFrom"}],attrs:{type:"date"},domProps:{value:e.dateFrom},on:{input:[function(t){t.target.composing||(e.dateFrom=t.target.value)},e.search]}})])]),r("div",{staticClass:"col-sm-4"},[r("label",{staticClass:"search__date search__date-to"},[e._v(" Date To "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.dateTo,expression:"dateTo"}],attrs:{type:"date"},domProps:{value:e.dateTo},on:{input:[function(t){t.target.composing||(e.dateTo=t.target.value)},e.search]}})])])]):e._e()],1):e._e()],2)])])},f=[],h=(r("4de4"),r("7db0"),r("caad"),r("b0c0"),r("a9e3"),r("2532"),r("3ca3"),r("841c"),r("ddb0"),r("2b3d"),r("5530")),p=r("8e5f"),v=r.n(p),g={props:{resultsCount:Number,loadingResults:Boolean},components:{Multiselect:v.a},data:function(){return{keyword:"",searchedKeyword:"",filters:{},dateFilter:null,dateFrom:null,dateTo:null,config:l}},computed:{searchParams:function(){var e=this,t={};return this.config.filters.forEach((function(r){e.filters[r.name]&&(t[r.name]=e.filters[r.name].map((function(e){return e.value})))})),Object(h["a"])({q:this.keyword,sort:this.dateFilter&&["asc","desc"].includes(this.dateFilter.value)?this.dateFilter.value:"",dateFrom:this.dateFrom,dateTo:this.dateTo},t)},url:function(){return window.href},secondarySearchURL:function(){return this.config.secondarySearch?"".concat(this.config.secondarySearch.url).concat(u(this.searchParams)):""},searchPlaceholder:function(){return this.config.placeholder||""}},watch:{loadingResults:function(e){e||(this.searchedKeyword=this.keyword)}},created:function(){this.initFilters(),this.search();var e=this;window.onpopstate=function(){e.initFilters(),e.search(!1)}},methods:{keyTabDown:function(e,t){if(e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),e.shiftKey){var r=t.curPointer;0==r?(t.pointer=t.options.length-1,t.$refs.list.scrollTop=t.$refs.list.scrollHeight):t.pointer--,t.curPointer=t.pointer}else{var a=t.curPointer;a==t.options.length-1?(t.pointer=0,t.$refs.list.scrollTop=0):t.pointer++,t.curPointer=t.pointer}var n=t.$refs.list.children[0].children[t.curPointer];(t.$refs.list.clientHeight-t.$refs.list.scrollTop<=n.offsetTop||n.offsetTop-t.$refs.list.scrollTop<0)&&(t.$refs.list.scrollTop=n.offsetTop)},keyArrowUp:function(e){var t=e.curPointer;0==t&&(e.pointer=e.options.length-1,e.$refs.list.scrollTop=e.$refs.list.scrollHeight),e.curPointer=e.pointer},keyArrowDown:function(e){var t=e.curPointer;t==e.options.length-1&&(e.pointer=0,e.$refs.list.scrollTop=0),e.curPointer=e.pointer},initFilters:function(){var e=window.location.search.substring(1),t=new URLSearchParams(decodeURI(e));this.searchedKeyword=this.keyword=t.get("q");var r={};this.config.filters.forEach((function(e){r[e.name]=e.options.filter((function(r){return t.getAll("".concat(e.name,"[]")).includes(r.value)}))})),this.filters=r,this.config.date&&(this.dateFilter=this.config.date.options.find((function(e){return t.get("sort")==e.value})),(t.get("dateFrom")||t.get("dateTo"))&&(this.dateFilter=this.config.date.options.find((function(e){return"range"==e.value})),this.dateFrom=t.get("dateFrom"),this.dateTo=t.get("dateTo")))},onKeywordChange:function(){this.debouncedSearch()},onFilterChange:function(){this.search()},onDateFilterChange:function(){this.dateFrom=this.dateTo=null,this.dateFilter&&"range"!=this.dateFilter.value&&this.search()},debouncedSearch:c((function(){this.search()}),500),search:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.config.allowEmptyKeyword||this.keyword){if(e){var t=window.location.pathname.replace(/\/$/,"");window.history.pushState({},"","".concat(t,"/").concat(u(this.searchParams)))}this.$emit("search",this.searchParams)}},addMultiSelectOverlay:function(e){var t=this;e.curPointer=e.pointer;var r=document.querySelector("body"),a=document.createElement("div");window.removeEventListener("keydown",this.keydownHandler),window.addEventListener("keydown",this.keydownHandler),a.classList.add("multiselect__overlay"),a.style.position="fixed",a.style.top=0,a.style.left=0,a.style.width="100%",a.style.height="100%",a.style.zIndex=9999,r.appendChild(a),a.addEventListener("click",(function(){t.$refs.filterSelect.length&&t.$refs.filterSelect[0].deactivate(),t.$refs.dateSelect.length&&t.$refs.dateSelect[0].deactivate(),t.removeMultiSelectOverlay()})),this.$el.querySelectorAll(".multiselect__content-wrapper").forEach((function(e){e.setAttribute("tabindex",0)})),this.$el.querySelectorAll(".multiselect__option").forEach((function(e){e.setAttribute("tabindex",0),e.setAttribute("role","button"),e.setAttribute("aria-pressed","false")}))},removeMultiSelectOverlay:function(){window.removeEventListener("keydown",this.keydownHandler);var e=document.querySelector(".multiselect__overlay");e&&e.remove()},onCloseFilterSelect:function(){this.$refs.filterSelect.length&&this.$refs.filterSelect[0].deactivate(),this.removeMultiSelectOverlay()},onCloseDateSelect:function(){this.$refs.dateSelect.length&&this.$refs.dateSelect[0].deactivate(),this.removeMultiSelectOverlay()}}},_=g,m=(r("962d"),r("2877")),y=Object(m["a"])(_,d,f,!1,null,"4939d7d2",null),w=y.exports,b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.pageResults.length?r("div",{staticClass:"search-results"},[r("ul",{staticClass:"search-results__list"},e._l(e.pageResults,(function(t){return r("li",{key:t.id,staticClass:"search-results__item"},[t.thumbnailURL?r("a",{staticClass:"search-results__thumbnail d-none d-sm-block",attrs:{href:t.url}},[r("img",{attrs:{src:t.thumbnailURL,alt:t.title}})]):e._e(),r("div",{staticClass:"search-results__details"},[r("a",{staticClass:"search-results__details--title",attrs:{href:t.url}},[r("h2",{class:["search-results__title","type-"+t.type]},[e._v(e._s(t.title))])]),r("p",{staticClass:"search-results__summary"},[e._v(e._s(t.summary))]),r("div",{staticClass:"d-flex"},[t.thumbnailURL?r("a",{staticClass:"search-results__thumbnail d-sm-none",attrs:{href:t.url}},[r("img",{attrs:{src:t.thumbnailURL,alt:t.title}})]):e._e(),r("div",{staticClass:"search-results__meta"},[t.fileURL?r("a",{staticClass:"search-results__url",attrs:{href:t.fileURL,target:"_blank"}},[e._v(" Download now "),t.fileMetaData?r("span",[e._v(e._s(t.fileMetaData))]):e._e()]):r("a",{staticClass:"search-results__url",attrs:{href:t.url}},[e._v(e._s(e._f("addHost")(t.url)))]),!1!==t.dateString?r("span",{staticClass:"search-results__date"},[t.dateString?[e._v(e._s(t.dateString))]:[e._v("Updated "+e._s(e._f("dateFormat")(t.date)))]],2):e._e()])])])])})),0),r("nav",{attrs:{"aria-label":"Search results pages"}},[r("ul",{staticClass:"pagination"},[e.currentPage>1?r("li",{staticClass:"pagination__prev"},[r("a",{staticClass:"btn btn-round btn-outline-primary btn-arrow-back",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.currentPage--}}},[e._v("Previous ")])]):e._e(),e._l(e.pageCount,(function(t){return r("li",{key:t,staticClass:"pagination__page",class:{"pagination__page--active":e.currentPage==t,"pagination__page--first":1==t,"pagination__page--last":t==e.pageCount}},[r("a",{staticClass:"btn btn-circle btn-outline-primary",class:{active:e.currentPage==t},attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),e.changePage(t)}}},[e._v(e._s(t)+" ")])])})),e.currentPage<e.pageCount?r("li",{staticClass:"pagination__next"},[r("a",{staticClass:"btn btn-round btn-outline-primary btn-arrow",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.currentPage++}}},[e._v("Next ")])]):e._e()],2)])]):e.errorMessage?r("h1",{staticClass:"search-results__message search-results__message--error"},[e._v(e._s(e.errorMessage))]):r("h1",{staticClass:"search-results__message"},[e._v("No results found")])},k=[],C=(r("fb6a"),{props:{errorMessage:String,results:Array,resultsPerPage:{type:Number,default:10}},data:function(){return{currentPage:1}},computed:{pageResults:function(){var e=(this.currentPage-1)*this.resultsPerPage;return this.results.slice(e,e+this.resultsPerPage)},pageCount:function(){return Math.ceil(this.results.length/this.resultsPerPage)}},methods:{changePage:function(e){this.currentPage!=e&&(this.currentPage=e,window.scrollTo(0,0))}},filters:{addHost:function(e){return window.location.host+e},dateFormat:function(e){var t=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],r=new Date(e),a=(r.getDate()<10?"0":"")+r.getDate();return"".concat(a," ").concat(t[r.getMonth()]," ").concat(r.getFullYear())}}}),S=C,P=(r("3407"),Object(m["a"])(S,b,k,!1,null,"b707866a",null)),F=P.exports,T={name:"Search",components:{SearchHeader:w,SearchResults:F},data:function(){return{isLoading:!1,error:"",results:[],resultsMeta:{}}},created:function(){},methods:{onSearch:function(e){var t=this;this.isLoading=!0,this.error="";var r=window.location.pathname.replace(/\/$/,""),a="".concat(r,"/search").concat(u(e));fetch(a,{headers:{Accept:"application/json"}}).then((function(e){if(e.status>=400&&e.status<600)throw new Error("Bad response from server");return e.json()})).then((function(e){if(e.error)throw new Error("Search query error");t.results=e.results?e.results:[],t.resultsMeta=e.meta})).catch((function(){t.error="An unexpected error ocurred, please refresh the page and try again",t.results=[]})).finally((function(){t.isLoading=!1}))}}},$=T,O=(r("497d"),Object(m["a"])($,n,s,!1,null,"246b820a",null)),x=O.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(e){return e(x)}}).$mount("#search-app")},"64c4":function(e,t,r){},"86bd":function(e,t,r){},"8d33":function(e,t,r){},"962d":function(e,t,r){"use strict";var a=r("8d33"),n=r.n(a);n.a}});
//# sourceMappingURL=app.js.map