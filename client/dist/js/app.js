(function(e){function t(t){for(var a,i,o=t[0],l=t[1],c=t[2],d=0,f=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&f.push(n[i][0]),n[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(f.length)f.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,o=1;o<r.length;o++){var l=r[o];0!==n[l]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var a={},n={app:0},s=[];function i(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"370b":function(e,t,r){},"3e22":function(e,t,r){"use strict";var a=r("a995"),n=r.n(a);n.a},"497d":function(e,t,r){"use strict";var a=r("64c4"),n=r.n(a);n.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"search-app"}},[r("SearchHeader",{attrs:{resultsCount:e.resultsMeta.count,loadingResults:e.isLoading},on:{search:e.onSearch}}),e.isLoading?r("div",{staticClass:"search__loader"},[r("span",{staticClass:"sr-only"},[e._v("Loading...")])]):r("SearchResults",{attrs:{results:e.results,errorMessage:e.error}})],1)},s=[],i=(r("99af"),r("d3b7"),r("ac1f"),r("5319"),r("4160"),r("a15b"),r("d81d"),r("b64b"),r("159b"),{labels:{filtersHint:"Refine your serach results below by selecting popular filters and/or ordering them by date."},filters:{type:{placeholder:"Type of content",options:[{name:"News",value:"news"},{name:"Event",value:"event"},{name:"Content",value:"content"}]},date:{placeholder:"Type of content",options:[{name:"Most recent first",value:"desc"},{name:"Oldest first",value:"asc"},{name:"Select dates",value:"range"}]}}}),o=document.getElementById("search-config"),l=o?JSON.parse(o.innerHTML):i,c=function(e,t){var r;return function(){var a=arguments,n=this,s=function(){return e.apply(n,a)};clearTimeout(r),r=setTimeout(s,t)}},u=function(e){var t=[];return Object.keys(e).forEach((function(r){Array.isArray(e[r])?e[r].length&&t.push("".concat(r,"[]=").concat(e[r].map(encodeURIComponent).join("&".concat(r,"[]=")))):e[r]&&"null"!=e[r]&&t.push("".concat(r,"=").concat(encodeURIComponent(e[r])))})),t.length?"?".concat(t.join("&")):""},d=function(e){return e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search__header"},[r("div",{staticClass:"search__heading"},[r("div",{staticClass:"search__heading-inner"},[r("search-heading",{staticClass:"search__title",domProps:{innerHTML:e._s(e.title)}}),e.subtitle?r("span",{staticClass:"search__subtitle",domProps:{innerHTML:e._s(e.subtitle)}}):e._e()],1)]),r("div",{staticClass:"search__keyword"},[r("div",{staticClass:"search__keyword-inner"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.keyword,expression:"keyword"}],staticClass:"search__input",attrs:{type:"search",placeholder:e.searchPlaceholder},domProps:{value:e.keyword},on:{input:[function(t){t.target.composing||(e.keyword=t.target.value)},e.onKeywordChange]}}),"material"==e.config.icons?r("i",{staticClass:"material-icons text-primary",attrs:{"aria-hidden":"true"}},[e._v("search")]):e._e()])]),e.config.secondarySearch?r("a",{staticClass:"search__secondary-link btn btn-outline-primary btn-round",attrs:{href:e.secondarySearchURL}},[e._v(e._s(e.config.secondarySearch.title))]):e._e(),r("div",{staticClass:"search__filters"},[r("div",{staticClass:"search__filters-inner"},[e.config.labels.filtersHint?r("h3",{staticClass:"search__hint"},[e._v(e._s(e.config.labels.filtersHint))]):e._e(),r("div",{staticClass:"row search__filters-row"},e._l(e.config.filters,(function(t,a){return r("div",{key:t.name,class:["col-md-6","col-xl-"+t.columns,"search__filter"]},[t.label?r("label",{staticClass:"search__filter-label"},[e._v(e._s(t.label))]):e._e(),t.showInline?[r("ul",{staticClass:"inline-filter"},e._l(t.options,(function(a){var n=a.name,s=a.value;return r("li",{key:n,staticClass:"inline-filter__option"},[r("button",{staticClass:"inline-filter__button",class:{"inline-filter__button--active":e.isFilterOptionActive(t.name,s)},attrs:{"data-text":n},on:{click:function(r){return e.changeFilter(t.name,n,s)}}},[e._v(" "+e._s(n)+" ")])])})),0)]:[r("multiselect",{key:a,ref:t.name,refInFor:!0,class:[{"multiselect--multiple":t.multiple},"filter-"+t.name],attrs:{"track-by":"value",label:"name",role:"button","aria-expanded":"false","aria-controls":"multi-filter-"+t.name,"max-height":400,placeholder:t.placeholder,options:t.options,multiple:t.multiple,searchable:!!t.searchable,"aria-label":t.label||t.placeholder},on:{input:function(r){return e.onFilterChange(t.name)},close:function(r){return e.onCloseFilterSelect(e.$refs[t.name][0])},open:function(r){return e.addMultiSelectOverlay(e.$refs[t.name][0])}},nativeOn:{keydown:[function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"space",32,r.key,[" ","Spacebar"])?null:e.keySpaceDown(r,e.$refs[t.name][0])},function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"tab",9,r.key,"Tab")?null:e.keyTabDown(r,e.$refs[t.name][0])},function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"up",38,r.key,["Up","ArrowUp"])?null:e.keyArrowUp(e.$refs[t.name][0])},function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"down",40,r.key,["Down","ArrowDown"])?null:e.keyArrowDown(e.$refs[t.name][0])}]},scopedSlots:e._u([{key:"tag",fn:function(t){var a=t.option,n=t.remove;return[r("span",{staticClass:"multiselect__tag"},[e._v(" "+e._s(a.name)+" "),r("button",{staticClass:"multiselect__tag-remove",on:{click:function(e){return n(a)}}},["material"==e.config.icons?r("i",{staticClass:"material-icons"},[e._v("close")]):r("span",[e._v("x")])])])]}}],null,!0),model:{value:e.filters[t.name],callback:function(r){e.$set(e.filters,t.name,r)},expression:"filters[filterConfig.name]"}},[t.iconClass?r("template",{slot:"clear"},[r("i",{staticClass:"multiselect__icon",class:t.iconClass,attrs:{"aria-hidden":"true"}})]):e._e(),e.config.caretIconClass?r("template",{slot:"caret"},[r("i",{staticClass:"multiselect__caret-icon",class:e.config.caretIconClass,attrs:{"aria-hidden":"true"}})]):e._e()],2),"date"==t.name&&e.filters.date&&"range"==e.filters.date.value?r("div",{staticClass:"search__dates row"},[r("div",{staticClass:"col-sm-4"},[r("label",{staticClass:"search__date search__date-from"},[e._v(" Date From "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.dateFrom,expression:"dateFrom"}],attrs:{type:"date"},domProps:{value:e.dateFrom},on:{input:[function(t){t.target.composing||(e.dateFrom=t.target.value)},e.search]}})])]),r("div",{staticClass:"col-sm-4"},[r("label",{staticClass:"search__date search__date-to"},[e._v(" Date To "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.dateTo,expression:"dateTo"}],attrs:{type:"date"},domProps:{value:e.dateTo},on:{input:[function(t){t.target.composing||(e.dateTo=t.target.value)},e.search]}})])])]):e._e()]],2)})),0)])])])},h=[],p=(r("4de4"),r("7db0"),r("caad"),r("b0c0"),r("a9e3"),r("4d63"),r("25f0"),r("2532"),r("3ca3"),r("841c"),r("ddb0"),r("2b3d"),r("5530")),_=r("b1f8"),g=r("8e5f"),m=r.n(g),v={render:function(e){return e("h".concat(l.headingLevel),this.$slots.default)}},y={props:{resultsCount:Number,loadingResults:Boolean},components:{Multiselect:m.a,SearchHeading:v},data:function(){return{keyword:"",searchedKeyword:"",filters:{},dateFrom:null,dateTo:null,config:l}},mounted:function(){var e=this;this.$nextTick().then((function(){e.$el.querySelectorAll(".multiselect").forEach((function(e){var t=e.getAttribute("aria-controls");e.querySelector(".multiselect__content-wrapper").id=t}))}))},computed:{searchParams:function(){var e=this,t={};this.config.filters.forEach((function(r){var a=e.filters[r.name];a&&(Array.isArray(a)||(a=[a]),t[r.name]=a.map((function(e){return e.value})))}));var r=null;return t.date&&(Object(_["a"])("dateFilter"),r=t.date[0],delete t.date),Object(p["a"])({q:this.keyword,sort:r&&["asc","desc"].includes(r)?r:"",dateFrom:this.dateFrom,dateTo:this.dateTo},t)},url:function(){return window.href},secondarySearchURL:function(){return this.config.secondarySearch?"".concat(this.config.secondarySearch.url).concat(u(this.searchParams)):""},searchPlaceholder:function(){return this.config.placeholder||""},title:function(){var e=this.config.labels.title;return this.searchedKeyword&&!this.loadingResults?e=this.config.labels.titleFound:this.keyword&&(e=this.config.labels.titleSearching),this.replacePlaceholders(e)},subtitle:function(){return this.config.labels.subtitle&&this.searchedKeyword&&!this.loadingResults?this.replacePlaceholders(this.config.labels.subtitle):"&nbsp;"}},watch:{loadingResults:function(e){e||(this.searchedKeyword=this.keyword)}},created:function(){this.initFilters(),this.search();var e=this;window.onpopstate=function(){e.initFilters(),e.search(!1)}},methods:{keySpaceDown:function(e,t){e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation();var r=t.$refs.list.children[0].children[t.curPointer].querySelector(".multiselect__option");r.dispatchEvent(new Event("click"))},keyTabDown:function(e,t){if(t.isOpen){if(e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),e.shiftKey){var r=t.curPointer;0==r?(t.pointer=t.options.length-1,t.$refs.list.scrollTop=t.$refs.list.scrollHeight):t.pointer--,t.curPointer=t.pointer}else{var a=t.curPointer;a==t.options.length-1?(t.pointer=0,t.$refs.list.scrollTop=0):t.pointer++,t.curPointer=t.pointer}var n=t.$refs.list.children[0].children[t.curPointer];(t.$refs.list.clientHeight-t.$refs.list.scrollTop<=n.offsetTop||n.offsetTop-t.$refs.list.scrollTop<0)&&(t.$refs.list.scrollTop=n.offsetTop)}},keyArrowUp:function(e){var t=e.curPointer;0==t&&(e.pointer=e.options.length-1,e.$refs.list.scrollTop=e.$refs.list.scrollHeight),e.curPointer=e.pointer},keyArrowDown:function(e){var t=e.curPointer;t==e.options.length-1&&(e.pointer=0,e.$refs.list.scrollTop=0),e.curPointer=e.pointer},initFilters:function(){var e=window.location.search.substring(1),t=new URLSearchParams(decodeURI(e));this.searchedKeyword=this.keyword=t.get("q");var r={};this.config.filters.forEach((function(e){r[e.name]=e.options.filter((function(r){return t.getAll("".concat(e.name,"[]")).includes(r.value)})),e.default&&!r[e.name].length&&(r[e.name]=e.options.find((function(t){return t.value==e.default})))})),this.filters=r,this.config.date&&(this.dateFilter=this.config.date.options.find((function(e){return t.get("sort")==e.value})),(t.get("dateFrom")||t.get("dateTo"))&&(this.dateFilter=this.config.date.options.find((function(e){return"range"==e.value})),this.dateFrom=t.get("dateFrom"),this.dateTo=t.get("dateTo")))},onKeywordChange:function(){this.debouncedSearch()},onFilterChange:function(e){"date"==e?this.onDateFilterChange():this.search()},onDateFilterChange:function(){this.dateFrom=this.dateTo=null,this.filters.date&&"range"!=this.filters.date.value&&this.search()},debouncedSearch:c((function(){this.search()}),500),search:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.config.allowEmptyKeyword||this.keyword){if(e){var t=window.location.pathname.replace(/\/$/,"");window.history.pushState({},"","".concat(t,"/").concat(u(this.searchParams)))}this.$emit("search",this.searchParams)}},changeFilter:function(e,t,r){this.filters[e]={name:t,value:r},this.onFilterChange()},isFilterOptionActive:function(e,t){var r=Array.isArray(this.filters[e])?this.filters[e]:[this.filters[e]];return!!r.find((function(e){return e.value==t}))},replacePlaceholders:function(e){var t={"[searchedKeyword]":this.searchedKeyword,"[keyword]":this.keyword,"[resultsCount]":this.resultsCount},r=Object.keys(t).map((function(e){return d(e)})).join("|"),a=new RegExp(r,"gi");return e.replace(a,(function(e){return t[e]}))},addMultiSelectOverlay:function(e){var t=this;e.curPointer=e.pointer,e.$el.setAttribute("aria-expanded","true");var r=document.querySelector("body"),a=document.createElement("div");window.removeEventListener("keydown",this.keydownHandler),window.addEventListener("keydown",this.keydownHandler),a.classList.add("multiselect__overlay"),a.style.position="fixed",a.style.top=0,a.style.left=0,a.style.width="100%",a.style.height="100%",a.style.zIndex=9999,r.appendChild(a),a.addEventListener("click",(function(){t.$refs.filterSelect.length&&t.$refs.filterSelect[0].deactivate(),Array.isArray(t.$refs.dateSelect)&&t.$refs.dateSelect.length?t.$refs.dateSelect[0].deactivate():t.$refs.dateSelect.deactivate(),t.removeMultiSelectOverlay()})),this.$el.querySelectorAll(".multiselect__content-wrapper").forEach((function(e){e.setAttribute("tabindex",0)})),this.$el.querySelectorAll(".multiselect__option").forEach((function(e){e.setAttribute("tabindex",0),e.setAttribute("role","button")}))},removeMultiSelectOverlay:function(){window.removeEventListener("keydown",this.keydownHandler),this.$el.querySelectorAll(".multiselect__content-wrapper").forEach((function(e){e.setAttribute("tabindex",-1)}));var e=document.querySelector(".multiselect__overlay");e&&e.remove()},onCloseFilterSelect:function(e){e.deactivate(),e.$el.setAttribute("aria-expanded","false"),this.removeMultiSelectOverlay()}}},b=y,w=(r("3e22"),r("2877")),C=Object(w["a"])(b,f,h,!1,null,null,null),k=C.exports,P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search-results"},[r("div",{staticClass:"search-results-inner"},[e.pageResults.length?[r("ul",{staticClass:"search-results__list"},e._l(e.pageResults,(function(t){return r("li",{key:t.id,staticClass:"search-results__item"},[t.thumbnailURL?r("a",{staticClass:"search-results__thumbnail d-none d-sm-block",attrs:{href:t.url}},[r("img",{attrs:{src:t.thumbnailURL,alt:t.title}})]):e._e(),r("div",{staticClass:"search-results__details"},[r("a",{staticClass:"search-results__details--title",attrs:{href:t.url}},[r("h2",{class:["search-results__title","type-"+t.type]},[e._v(e._s(t.title))])]),r("div",{staticClass:"search-results__content"},[r("p",{staticClass:"search-results__summary",domProps:{innerHTML:e._s(t.summary)}}),t.extraContent?r("div",{staticClass:"search-results__extra-content",domProps:{innerHTML:e._s(t.extraContent)}}):e._e()]),r("div",{staticClass:"d-flex"},[t.thumbnailURL?r("a",{staticClass:"search-results__thumbnail d-sm-none",attrs:{href:t.url}},[r("img",{attrs:{src:t.thumbnailURL,alt:t.title}})]):e._e(),r("div",{staticClass:"search-results__meta"},[t.fileURL?r("a",{staticClass:"search-results__url",attrs:{href:t.fileURL,target:"_blank"}},[e._v(" Download now "),t.fileMetaData?r("span",[e._v(e._s(t.fileMetaData))]):e._e()]):r("a",{staticClass:"search-results__url",attrs:{href:t.url}},[e.config.labels.resultLinkText?[e._v(" "+e._s(e.config.labels.resultLinkText)),r("i",{staticClass:"search-results__url-icon",attrs:{"aria-hidden":"true"}})]:[e._v(" "+e._s(e._f("addHost")(t.url))+" ")]],2),!1!==t.dateString?r("span",{staticClass:"search-results__date"},[t.dateString?[e._v(e._s(t.dateString))]:[e._v("Updated "+e._s(e._f("dateFormat")(t.date)))]],2):e._e()])])])])})),0),r("pagination",{attrs:{currentPage:e.currentPage,pageCount:e.pageCount,page:e.currentPage},on:{"update:page":function(t){e.currentPage=t}}})]:[e.errorMessage?r("h1",{staticClass:"search-results__message search-results__message--error"},[e._v(e._s(e.errorMessage))]):r("h1",{staticClass:"search-results__message"},[e._v("No results found")])]],2)])},S=[],$=(r("fb6a"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nav",{attrs:{"aria-label":"Search results pages"}},[r("ul",{staticClass:"pagination"},[e.currentPage>1?r("li",{staticClass:"pagination__prev"},[r("button",{staticClass:"btn pagination__button pagination__button__prev",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.$emit("update:page",e.currentPage-1)}}},[e._v(" Previous ")])]):e._e(),e._l(e.pageCount,(function(t){return r("li",{key:t,staticClass:"pagination__page",class:{"pagination__page--active":e.currentPage==t,"pagination__page--first":1==t,"pagination__page--last":t==e.pageCount}},[r("button",{staticClass:"btn pagination__button",class:{"pagination__button--active":e.currentPage==t},attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),e.$emit("update:page",t)}}},[e._v(" "+e._s(t)+" ")])])})),e.currentPage<e.pageCount?r("li",{staticClass:"pagination__next"},[r("button",{staticClass:"btn pagination__button pagination__button__next",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.$emit("update:page",e.currentPage+1)}}},[e._v(" Next ")])]):e._e()],2)])}),x=[],T={name:"Pagination",props:{currentPage:Number,pageCount:Number}},A=T,O=(r("6ad7"),Object(w["a"])(A,$,x,!1,null,"56d5117e",null)),F=O.exports,L={props:{errorMessage:String,results:Array,resultsPerPage:{type:Number,default:10}},components:{Pagination:F},data:function(){return{config:l,currentPage:1}},computed:{pageResults:function(){var e=(this.currentPage-1)*this.resultsPerPage;return this.results.slice(e,e+this.resultsPerPage)},pageCount:function(){return Math.ceil(this.results.length/this.resultsPerPage)}},methods:{changePage:function(e){this.currentPage!=e&&(this.currentPage=e,window.scrollTo(0,0))}},filters:{addHost:function(e){return window.location.host+e},dateFormat:function(e){var t=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],r=new Date(e),a=(r.getDate()<10?"0":"")+r.getDate();return"".concat(a," ").concat(t[r.getMonth()]," ").concat(r.getFullYear())}}},M=L,E=(r("c4d5"),Object(w["a"])(M,P,S,!1,null,"27b9e465",null)),R=E.exports,D={name:"Search",components:{SearchHeader:k,SearchResults:R},data:function(){return{isLoading:!1,error:"",results:[],resultsMeta:{}}},created:function(){},methods:{onSearch:function(e){var t=this;this.isLoading=!0,this.error="";var r=window.location.pathname.replace(/\/$/,""),a="".concat(r,"/search").concat(u(e));fetch(a,{headers:{Accept:"application/json"}}).then((function(e){if(e.status>=400&&e.status<600)throw new Error("Bad response from server");return e.json()})).then((function(e){if(e.error)throw new Error("Search query error");t.results=e.results?e.results:[],t.resultsMeta=e.meta})).catch((function(){t.error="An unexpected error ocurred, please refresh the page and try again",t.results=[]})).finally((function(){t.isLoading=!1}))}}},j=D,U=(r("497d"),Object(w["a"])(j,n,s,!1,null,"246b820a",null)),H=U.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(e){return e(H)}}).$mount("#search-app")},"64c4":function(e,t,r){},"6ad7":function(e,t,r){"use strict";var a=r("370b"),n=r.n(a);n.a},a995:function(e,t,r){},bdbb:function(e,t,r){},c4d5:function(e,t,r){"use strict";var a=r("bdbb"),n=r.n(a);n.a}});
//# sourceMappingURL=app.js.map